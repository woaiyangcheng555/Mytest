
<html> 
  
<head>
<title>测试数据</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
</head> 
<style type="text/css"> 
 table, td{ 
 font:100% '微软雅黑'; 
 } 
 table{width:95%;border-collapse:collapse;
margin:20px auto;} 
 th, td{text-align:center;border:1px solid #fff;} 
 th{background:#328aa4} 
 td{background:#e5f1f4;}
 input{width:40px;}
 .pig input{width:80px;}
</style> 
<script src="https://code.jquery.com/jquery-1.8.3.min.js"></script> 
<body> 
 <!--<a href="#" id="add_btn">新增</a> 
 <input id="Ktext" type="text"> <a href="#" id="search_btn"> 查询</a> 
 <a href="#" style ="margin:100px" id="back_btn">返回</a> -->
 <br/> 
<table id="tb"> 
 <tr id="trr">
  <th>科别</th> 
  <th>总数</th> 
  <th>入院</th> 
  <th>出院</th>
  <th>值班人员</th>
  <th>操作</th> 
   
 </tr> 
 <tbody id="hide_tbody"> 
 <tr style="display:none" id="trr"> 
  <td style="id="no_id"><input value='' type='text'></td> 
  <td><input value='' type='text'></td> 
  <td><input value='' type='text'></td> 
  <td id="a"><a href="#" id="save_btn">保存</a> 
  <a href="#" id="edit_btn" style="display:none">修改</a> 
  <!--<a href="#" id="del_btn">删除</a></td>-->
 </tr> 
 </tbody> 
 <tbody id="show_tbody"> 
 <tr id="trr" >
  <td>儿科</td> 
  <td id="no_id">10</td> 
  <td>2</td> 
  <td>1</td>
  <td class="pig">张三，李四</td> 
  <td id="a"><a href="#" id="save_btn" style="display:none">保存</a> 
  <a href="#" id="edit_btn">修改</a> 
  <!--<a href="#" id="del_btn">删除</a></td>-->
 </tr> 
 <tr id="trr">
  <td>内一</td> 
  <td id="no_id">9</td> 
  <td>3</td> 
  <td>4</td>
  <td class="pig">张三，李四</td>
  <td id="a"><a href="#" id="save_btn" style="display:none">保存</a> 
  <a href="#" id="edit_btn">修改</a> 
  <!--<a href="#" id="del_btn">删除</a></td>-->
 </tr> 
 <tr id="trr">
  <td>内七</td> 
  <td id="no_id">32</td> 
  <td>2</td> 
  <td>5</td>
  <td class="pig">张三，李四</td> 
  <td id="a"><a href="#" id="save_btn" style="display:none">保存</a> 
  <a href="#" id="edit_btn">修改</a> 
  <!--<a href="#" id="del_btn">删除</a></td>-->
 </tr> 
 <tr id="trr">
  <td>内三</td> 
  <td id="no_id">16</td> 
  <td>0</td> 
  <td>6</td>
  <td class="pig">张三，李四</td> 
  <td id="a"><a href="#" id="save_btn" style="display:none">保存</a> 
  <a href="#" id="edit_btn">修改</a> 
  <!--<a href="#" id="del_btn">删除</a></td>--> 
 </tr> 
 </tbody> 
</table>

<script>
$(document).ready(function(){ 
 var tb = $("#tb"); 
   
 //添加 
 $("#add_btn").click(function(){ 
  var hideTr = $("#hide_tbody",tb).children().first(); 
  var newTr = hideTr.clone().show(); 
  $("#show_tbody",tb).append(newTr); 
 }); 
   
 //保存 
 $("#save_btn",tb).die('click').live('click',function(){ 
   var tr = $(this).parent().parent(); 
  $("input[type='text']",tr).each(function(i,el){ 
   el = $(el); 
   el.parent().text(el.val()); 
   el.remove(); 
  }); 
  $("#save_btn",tr).hide(); 
  $("#edit_btn",tr).show(); 
 }); 
   
 //修改 
 $("#edit_btn",tb).die('click').live('click',function(){ 
  var tr = $(this).parent().parent(); 
  $("td:not('#a')",tr).each(function(i,el){ 
   el = $(el); 
   var html = "<input value='"+el.text()+"' type='text'>"; 
   el.html(html); 
  }); 
  $("#edit_btn",tr).hide(); 
  $("#save_btn",tr).show(); 
 }); 
   
 //删除 
 $("#del_btn",tb).die('click').live('click',function(){ 
  $(this).parent().parent().remove(); 
 }); 
   
 //查询 
 $("#search_btn").click(function(){ 
  var key = $("#Ktext").val(); 
  var sbody = $("#show_tbody"); 
  var trr = $("#trr",sbody); 
  var keyword = $("#no_id",sbody).text(); 
  for(var i = 0; i < keyword.length;i++) 
  { 
  if(keyword[i]== key[0]){ 
   trr.eq(i).show(); 
  }else{ 
   trr.eq(i).hide(); 
  } 
  } 
 }); 
 //返回 
 $("#back_btn").click(function(){ 
  var sbody = $("#show_tbody"); 
  $("#trr",sbody).show(); 
   
 }); 
}); 
</script>

</body> 
</html> 
